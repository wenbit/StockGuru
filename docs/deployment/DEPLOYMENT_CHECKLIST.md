# ğŸš€ StockGuru Neon éƒ¨ç½²æ£€æŸ¥æ¸…å•

> æŒ‰é¡ºåºå®Œæˆä»¥ä¸‹æ­¥éª¤ï¼Œç¡®ä¿éƒ¨ç½²é¡ºåˆ©

---

## âœ… å‡†å¤‡é˜¶æ®µ

### 1. è´¦å·å‡†å¤‡
- [ ] Neon è´¦å·ï¼ˆhttps://console.neon.tech/ï¼‰
- [ ] Render è´¦å·ï¼ˆhttps://dashboard.render.com/ï¼‰
- [ ] Vercel è´¦å·ï¼ˆhttps://vercel.com/dashboardï¼‰
- [ ] GitHub ä»“åº“å·²æ¨é€æœ€æ–°ä»£ç 

### 2. ä»£ç æ£€æŸ¥
- [ ] æ‰€æœ‰ Supabase ç›¸å…³ä»£ç å·²ç§»é™¤æˆ–æ³¨é‡Š
- [ ] `requirements.txt` åŒ…å«æ‰€æœ‰ä¾èµ–
- [ ] `package.json` åŒ…å«æ‰€æœ‰ä¾èµ–
- [ ] æ•°æ®åº“è„šæœ¬æ–‡ä»¶å®Œæ•´

---

## ğŸ—„ï¸ æ•°æ®åº“éƒ¨ç½² (Neon)

### 3. åˆ›å»º Neon é¡¹ç›®
- [ ] ç™»å½• Neon Console
- [ ] åˆ›å»ºæ–°é¡¹ç›® `stockguru`
- [ ] é€‰æ‹©åŒºåŸŸï¼ˆæ¨èï¼šSingaporeï¼‰
- [ ] å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²å¹¶ä¿å­˜

### 4. åˆå§‹åŒ–æ•°æ®åº“
- [ ] æ–¹æ³•1ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬
  ```bash
  ./scripts/deploy/init_neon_database.sh 'postgresql://...'
  ```
- [ ] æ–¹æ³•2ï¼šæ‰‹åŠ¨æ‰§è¡Œ SQL
  - [ ] æ‰§è¡Œ `daily_stock_data_schema.sql`
  - [ ] æ‰§è¡Œ `daily_sync_status_schema.sql`
  - [ ] æ‰§è¡Œ `sync_progress_schema.sql`

### 5. éªŒè¯æ•°æ®åº“
- [ ] æ£€æŸ¥æ‰€æœ‰è¡¨å·²åˆ›å»º
  ```sql
  SELECT table_name FROM information_schema.tables 
  WHERE table_schema = 'public';
  ```
- [ ] ç¡®è®¤ç´¢å¼•å·²åˆ›å»º
- [ ] æµ‹è¯•æ•°æ®åº“è¿æ¥

---

## ğŸ”§ åç«¯éƒ¨ç½² (Render)

### 6. åˆ›å»º Render æœåŠ¡
- [ ] ç™»å½• Render Dashboard
- [ ] ç‚¹å‡» "New +" â†’ "Web Service"
- [ ] è¿æ¥ GitHub ä»“åº“
- [ ] é€‰æ‹©åˆ†æ”¯ï¼š`main`

### 7. é…ç½® Render æœåŠ¡
- [ ] **Name**: `stockguru-api`
- [ ] **Region**: `Singapore`
- [ ] **Root Directory**: `stockguru-web/backend`
- [ ] **Runtime**: `Python 3`
- [ ] **Build Command**: `pip install -r requirements.txt`
- [ ] **Start Command**: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
- [ ] **Instance Type**: `Free`

### 8. é…ç½®ç¯å¢ƒå˜é‡
åœ¨ Render æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- [ ] `DATABASE_URL` = `postgresql://...`ï¼ˆNeon è¿æ¥å­—ç¬¦ä¸²ï¼‰
- [ ] `NEON_DATABASE_URL` = `postgresql://...`ï¼ˆåŒä¸Šï¼‰
- [ ] `PYTHON_VERSION` = `3.12.0`
- [ ] `LOG_LEVEL` = `INFO`

### 9. éƒ¨ç½²åç«¯
- [ ] ç‚¹å‡» "Create Web Service"
- [ ] ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆ3-5åˆ†é’Ÿï¼‰
- [ ] å¤åˆ¶åç«¯ URLï¼š`https://stockguru-api.onrender.com`

### 10. éªŒè¯åç«¯
- [ ] è®¿é—®å¥åº·æ£€æŸ¥ï¼š`https://stockguru-api.onrender.com/health`
- [ ] æµ‹è¯• APIï¼š`https://stockguru-api.onrender.com/api/v1/daily/stats`
- [ ] æ£€æŸ¥æ—¥å¿—ç¡®è®¤å®šæ—¶ä»»åŠ¡å¯åŠ¨

---

## ğŸŒ å‰ç«¯éƒ¨ç½² (Vercel)

### 11. åˆ›å»º Vercel é¡¹ç›®
- [ ] ç™»å½• Vercel Dashboard
- [ ] ç‚¹å‡» "Add New..." â†’ "Project"
- [ ] å¯¼å…¥ GitHub ä»“åº“
- [ ] é€‰æ‹©åˆ†æ”¯ï¼š`main`

### 12. é…ç½® Vercel é¡¹ç›®
- [ ] **Framework Preset**: `Next.js`
- [ ] **Root Directory**: `frontend`
- [ ] **Build Command**: è‡ªåŠ¨æ£€æµ‹
- [ ] **Output Directory**: è‡ªåŠ¨æ£€æµ‹

### 13. é…ç½®ç¯å¢ƒå˜é‡
åœ¨ Vercel æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- [ ] `NEXT_PUBLIC_API_URL` = `https://stockguru-api.onrender.com`

### 14. éƒ¨ç½²å‰ç«¯
- [ ] ç‚¹å‡» "Deploy"
- [ ] ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆ2-3åˆ†é’Ÿï¼‰
- [ ] å¤åˆ¶å‰ç«¯ URLï¼š`https://stockguru.vercel.app`

### 15. éªŒè¯å‰ç«¯
- [ ] è®¿é—®é¦–é¡µ
- [ ] æµ‹è¯•æŸ¥è¯¢é¡µé¢
- [ ] æµ‹è¯•åŒæ­¥é¡µé¢
- [ ] æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ— é”™è¯¯

---

## ğŸ“Š æ•°æ®åˆå§‹åŒ–ï¼ˆå¯é€‰ï¼‰

### 16. åˆå§‹åŒ–å†å²æ•°æ®
é€‰æ‹©ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€ï¼š

#### æ–¹æ³•1ï¼šæœ¬åœ°è„šæœ¬
- [ ] é…ç½®ç¯å¢ƒå˜é‡
  ```bash
  export NEON_DATABASE_URL='postgresql://...'
  ```
- [ ] è¿è¡ŒåŒæ­¥è„šæœ¬
  ```bash
  python3 scripts/test_copy_sync.py --date 2025-10-18 --all
  ```

#### æ–¹æ³•2ï¼šWeb ç•Œé¢
- [ ] è®¿é—® `https://stockguru.vercel.app/sync-status`
- [ ] é€‰æ‹©æ—¥æœŸèŒƒå›´
- [ ] ç‚¹å‡»"å¼€å§‹åŒæ­¥"

#### æ–¹æ³•3ï¼šä» Supabase è¿ç§»
- [ ] å¯¼å‡º Supabase æ•°æ®
  ```bash
  pg_dump "postgresql://[supabase-url]" \
    --table=daily_stock_data \
    --data-only > data.sql
  ```
- [ ] å¯¼å…¥åˆ° Neon
  ```bash
  psql "postgresql://[neon-url]" < data.sql
  ```

---

## ğŸ” åŠŸèƒ½éªŒè¯

### 17. æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
- [ ] **æ•°æ®æŸ¥è¯¢**
  - [ ] æŒ‰æ—¥æœŸæŸ¥è¯¢
  - [ ] æŒ‰æ¶¨è·Œå¹…ç­›é€‰
  - [ ] åˆ†é¡µåŠŸèƒ½
  - [ ] Excel å¯¼å‡º

- [ ] **æ•°æ®åŒæ­¥**
  - [ ] æ‰‹åŠ¨åŒæ­¥å•æ—¥
  - [ ] æ‰¹é‡åŒæ­¥
  - [ ] è¿›åº¦æ˜¾ç¤º
  - [ ] çŠ¶æ€æ›´æ–°

- [ ] **å®šæ—¶ä»»åŠ¡**
  - [ ] æ£€æŸ¥åç«¯æ—¥å¿—
  - [ ] ç¡®è®¤ä»»åŠ¡å·²æ³¨å†Œ
  - [ ] ç­‰å¾…19:00éªŒè¯è‡ªåŠ¨åŒæ­¥

### 18. æ€§èƒ½æµ‹è¯•
- [ ] æŸ¥è¯¢å“åº”æ—¶é—´ < 2ç§’
- [ ] åŒæ­¥é€Ÿåº¦ > 4è‚¡/ç§’
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 3ç§’

---

## ğŸ”’ å®‰å…¨æ£€æŸ¥

### 19. ç¯å¢ƒå˜é‡å®‰å…¨
- [ ] æ•°æ®åº“å¯†ç æœªæ³„éœ²
- [ ] `.env` æ–‡ä»¶å·²åŠ å…¥ `.gitignore`
- [ ] GitHub ä»“åº“æ— æ•æ„Ÿä¿¡æ¯

### 20. CORS é…ç½®
- [ ] åç«¯ CORS ä»…å…è®¸å‰ç«¯åŸŸå
- [ ] ç”Ÿäº§ç¯å¢ƒç¦ç”¨ `allow_origins=["*"]`

---

## ğŸ“ æ–‡æ¡£æ›´æ–°

### 21. æ›´æ–°æ–‡æ¡£
- [ ] README.md æ›´æ–°éƒ¨ç½²è¯´æ˜
- [ ] ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶å·²æ›´æ–°
- [ ] éƒ¨ç½²æŒ‡å—å·²å®Œå–„

---

## ğŸ¯ ä¸Šçº¿åä»»åŠ¡

### 22. ç›‘æ§è®¾ç½®
- [ ] é…ç½® Neon æ•°æ®åº“ç›‘æ§
- [ ] é…ç½® Render æ—¥å¿—ç›‘æ§
- [ ] é…ç½® Vercel Analytics

### 23. å¤‡ä»½ç­–ç•¥
- [ ] å¯ç”¨ Neon è‡ªåŠ¨å¤‡ä»½
- [ ] è®¾ç½®å®šæœŸæ•°æ®å¯¼å‡º
- [ ] æµ‹è¯•æ¢å¤æµç¨‹

### 24. æ€§èƒ½ä¼˜åŒ–
- [ ] æ£€æŸ¥æ…¢æŸ¥è¯¢
- [ ] ä¼˜åŒ–æ•°æ®åº“ç´¢å¼•
- [ ] é…ç½® CDNï¼ˆå¦‚éœ€è¦ï¼‰

---

## âœ… æœ€ç»ˆæ£€æŸ¥

### 25. å…¨é¢æµ‹è¯•
- [ ] æ‰€æœ‰é¡µé¢å¯è®¿é—®
- [ ] æ‰€æœ‰ API æ­£å¸¸å·¥ä½œ
- [ ] å®šæ—¶ä»»åŠ¡æ­£å¸¸æ‰§è¡Œ
- [ ] æ•°æ®åŒæ­¥æ­£å¸¸
- [ ] æ— æ§åˆ¶å°é”™è¯¯

### 26. æ–‡æ¡£å½’æ¡£
- [ ] ä¿å­˜æ‰€æœ‰è¿æ¥å­—ç¬¦ä¸²ï¼ˆå®‰å…¨å­˜å‚¨ï¼‰
- [ ] è®°å½•éƒ¨ç½²æ—¥æœŸå’Œç‰ˆæœ¬
- [ ] æ›´æ–°éƒ¨ç½²æ–‡æ¡£

---

## ğŸ‰ éƒ¨ç½²å®Œæˆï¼

**è®¿é—®åœ°å€**ï¼š
- ğŸŒ å‰ç«¯ï¼šhttps://stockguru.vercel.app
- ğŸ”§ åç«¯ï¼šhttps://stockguru-api.onrender.com
- ğŸ—„ï¸ æ•°æ®åº“ï¼šNeon Console

**ä¸‹ä¸€æ­¥**ï¼š
1. åˆ†äº«ç»™ç”¨æˆ·æµ‹è¯•
2. æ”¶é›†åé¦ˆ
3. æŒç»­ä¼˜åŒ–

---

## ğŸ“ é—®é¢˜æ’æŸ¥

å¦‚é‡åˆ°é—®é¢˜ï¼Œæ£€æŸ¥ï¼š
1. ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
2. æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸
3. åç«¯æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯
4. å‰ç«¯æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
5. CORS é…ç½®æ˜¯å¦æ­£ç¡®

**å¸¸ç”¨å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
curl https://stockguru-api.onrender.com/health

# æµ‹è¯•æ•°æ®åº“è¿æ¥
psql "postgresql://..." -c "SELECT 1;"

# é‡æ–°éƒ¨ç½²å‰ç«¯
vercel --prod

# é‡æ–°éƒ¨ç½²åç«¯
# åœ¨ Render Dashboard ç‚¹å‡» "Manual Deploy"
```
