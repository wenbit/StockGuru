# æœªå®Œæˆéœ€æ±‚æ¸…å•

**æ›´æ–°æ—¶é—´**: 2025-10-15 01:59  
**å½“å‰å®Œæˆåº¦**: 89%

---

## ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ (å»ºè®®æœ¬å‘¨å®Œæˆ)

### 1. å†å²è®°å½•å‰ç«¯é¡µé¢ â±ï¸ 3-4 å°æ—¶
**çŠ¶æ€**: åç«¯å·²å®Œæˆï¼Œå‰ç«¯å¾…å¼€å‘

**éœ€è¦åšçš„**:
- [ ] åˆ›å»º `frontend/app/history/page.tsx`
- [ ] å®ç°ä»»åŠ¡åˆ—è¡¨ç»„ä»¶
- [ ] æ·»åŠ æ—¥æœŸç­›é€‰
- [ ] ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

**å‚è€ƒä»£ç **:
```typescript
// frontend/app/history/page.tsx
'use client';

import { useState, useEffect } from 'react';
import { apiClient } from '@/lib/api-client';

export default function HistoryPage() {
  const [tasks, setTasks] = useState([]);
  
  useEffect(() => {
    apiClient.listScreenings(20).then(setTasks);
  }, []);
  
  return (
    <div className="container mx-auto p-8">
      <h1 className="text-3xl font-bold mb-6">å†å²è®°å½•</h1>
      <div className="space-y-4">
        {tasks.map(task => (
          <TaskCard key={task.task_id} task={task} />
        ))}
      </div>
    </div>
  );
}
```

---

### 2. è‚¡ç¥¨è¯¦æƒ…é¡µ â±ï¸ 3-4 å°æ—¶
**çŠ¶æ€**: Kçº¿ç»„ä»¶å·²å®Œæˆï¼Œéœ€è¦åˆ›å»ºè¯¦æƒ…é¡µ

**éœ€è¦åšçš„**:
- [ ] åˆ›å»º `frontend/app/stock/[code]/page.tsx`
- [ ] é›†æˆ StockChart ç»„ä»¶
- [ ] æ·»åŠ æ›´å¤šæŠ€æœ¯æŒ‡æ ‡
- [ ] æ·»åŠ åŸºæœ¬é¢ä¿¡æ¯

**å‚è€ƒä»£ç **:
```typescript
// frontend/app/stock/[code]/page.tsx
'use client';

import StockChart from '@/components/StockChart';

export default function StockDetailPage({ params }: { params: { code: string } }) {
  return (
    <div className="container mx-auto p-8">
      <h1 className="text-3xl font-bold mb-6">è‚¡ç¥¨è¯¦æƒ…</h1>
      
      {/* Kçº¿å›¾ */}
      <StockChart 
        stockCode={params.code} 
        stockName="è‚¡ç¥¨åç§°" 
        days={60} 
      />
      
      {/* æŠ€æœ¯æŒ‡æ ‡ */}
      <div className="mt-8">
        <h2 className="text-2xl font-semibold mb-4">æŠ€æœ¯æŒ‡æ ‡</h2>
        {/* MACD, RSI, BOLL ç­‰ */}
      </div>
    </div>
  );
}
```

---

### 3. å¡ç‰‡å¼å¸ƒå±€ä¼˜åŒ– â±ï¸ 2-3 å°æ—¶
**çŠ¶æ€**: å½“å‰æ˜¯è¡¨æ ¼ï¼ŒPRD è¦æ±‚å¡ç‰‡å¼

**éœ€è¦åšçš„**:
- [ ] ä¿®æ”¹ `frontend/app/page.tsx` çš„ç»“æœå±•ç¤ºéƒ¨åˆ†
- [ ] åˆ›å»º StockCard ç»„ä»¶
- [ ] å“åº”å¼ç½‘æ ¼å¸ƒå±€

**å‚è€ƒä»£ç **:
```typescript
// frontend/components/StockCard.tsx
export default function StockCard({ stock }: { stock: StockResult }) {
  return (
    <div className="bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow">
      <div className="flex justify-between items-start mb-4">
        <div>
          <h3 className="text-xl font-bold">{stock.stock_name}</h3>
          <p className="text-gray-500">{stock.stock_code}</p>
        </div>
        <div className="text-right">
          <div className="text-2xl font-bold">Â¥{stock.close_price.toFixed(2)}</div>
          <div className={stock.change_pct > 0 ? 'text-red-600' : 'text-green-600'}>
            {stock.change_pct > 0 ? '+' : ''}{stock.change_pct.toFixed(2)}%
          </div>
        </div>
      </div>
      
      <div className="grid grid-cols-2 gap-4 mb-4">
        <div>
          <span className="text-gray-500">åŠ¨é‡åˆ†æ•°</span>
          <div className="text-lg font-semibold">{stock.momentum_score.toFixed(2)}</div>
        </div>
        <div>
          <span className="text-gray-500">ç»¼åˆè¯„åˆ†</span>
          <div className="text-lg font-semibold">{stock.comprehensive_score.toFixed(2)}</div>
        </div>
      </div>
      
      <button 
        onClick={() => window.location.href = `/stock/${stock.stock_code}`}
        className="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700"
      >
        æŸ¥çœ‹è¯¦æƒ…
      </button>
    </div>
  );
}

// åœ¨ page.tsx ä¸­ä½¿ç”¨
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {taskResult.results.map((stock) => (
    <StockCard key={stock.stock_code} stock={stock} />
  ))}
</div>
```

---

## ğŸŸ¢ ä½ä¼˜å…ˆçº§ (å¯é€‰åŠŸèƒ½)

### 4. HTML æŠ¥å‘Šå¯¼å‡º â±ï¸ 3-4 å°æ—¶
**éœ€è¦åšçš„**:
- [ ] åˆ›å»º HTML æ¨¡æ¿
- [ ] æ·»åŠ å¯¼å‡º API
- [ ] å‰ç«¯æ·»åŠ å¯¼å‡ºæŒ‰é’®

**å‚è€ƒä»£ç **:
```python
# stockguru-web/backend/app/api/screening.py
from fastapi.responses import HTMLResponse
from jinja2 import Environment, FileSystemLoader

@router.get("/screening/{task_id}/export")
async def export_report(task_id: str):
    # è·å–ç»“æœ
    results = await screening_service.get_task_result(task_id)
    
    # æ¸²æŸ“æ¨¡æ¿
    env = Environment(loader=FileSystemLoader('templates'))
    template = env.get_template('report.html')
    html = template.render(results=results)
    
    return HTMLResponse(content=html)
```

---

### 5. å‘½ä»¤è¡Œå·¥å…· â±ï¸ 2-3 å°æ—¶
**éœ€è¦åšçš„**:
- [ ] åˆ›å»º `cli.py`
- [ ] ä½¿ç”¨ Click åº“
- [ ] æ”¯æŒå‚æ•°é…ç½®

**å‚è€ƒä»£ç **:
```python
# cli.py
import click
from datetime import datetime

@click.group()
def cli():
    """StockGuru å‘½ä»¤è¡Œå·¥å…·"""
    pass

@cli.command()
@click.option('--date', default=None, help='ç­›é€‰æ—¥æœŸ (YYYY-MM-DD)')
@click.option('--top-n', default=10, help='ç­›é€‰æ•°é‡')
def screen(date, top_n):
    """è¿è¡Œè‚¡ç¥¨ç­›é€‰"""
    if date is None:
        date = datetime.now().strftime('%Y-%m-%d')
    
    click.echo(f'å¼€å§‹ç­›é€‰ {date} çš„è‚¡ç¥¨...')
    # è°ƒç”¨ç­›é€‰é€»è¾‘
    
@cli.command()
def list():
    """æŸ¥çœ‹å†å²è®°å½•"""
    click.echo('å†å²ç­›é€‰è®°å½•:')
    # åˆ—å‡ºå†å²è®°å½•

if __name__ == '__main__':
    cli()
```

---

### 6. æ›´å¤šæŠ€æœ¯æŒ‡æ ‡ â±ï¸ 4-6 å°æ—¶
**éœ€è¦åšçš„**:
- [ ] MACD æŒ‡æ ‡
- [ ] RSI æŒ‡æ ‡
- [ ] BOLL å¸ƒæ—å¸¦
- [ ] æˆäº¤é‡æŸ±çŠ¶å›¾

**å‚è€ƒä»£ç **:
```python
# stockguru-web/backend/app/services/modules/technical_indicators.py
class TechnicalIndicators:
    @staticmethod
    def calculate_macd(prices, fast=12, slow=26, signal=9):
        """è®¡ç®— MACD"""
        pass
    
    @staticmethod
    def calculate_rsi(prices, period=14):
        """è®¡ç®— RSI"""
        pass
    
    @staticmethod
    def calculate_boll(prices, period=20, std=2):
        """è®¡ç®—å¸ƒæ—å¸¦"""
        pass
```

---

## ğŸ“‹ å¿«é€Ÿè¡ŒåŠ¨æ¸…å•

### ä»Šå¤©å¯ä»¥å®Œæˆ (2-3 å°æ—¶)
- [ ] å¡ç‰‡å¼å¸ƒå±€ä¼˜åŒ–

### æœ¬å‘¨å¯ä»¥å®Œæˆ (6-8 å°æ—¶)
- [ ] å†å²è®°å½•é¡µé¢
- [ ] è‚¡ç¥¨è¯¦æƒ…é¡µ

### ä¸‹å‘¨å¯ä»¥å®Œæˆ (5-7 å°æ—¶)
- [ ] HTML æŠ¥å‘Šå¯¼å‡º
- [ ] å‘½ä»¤è¡Œå·¥å…·

---

## ğŸ¯ å®Œæˆåçš„æ•ˆæœ

å®Œæˆä»¥ä¸Šæ‰€æœ‰åŠŸèƒ½å:
- âœ… å®Œæˆåº¦å°†è¾¾åˆ° **100%**
- âœ… æ‰€æœ‰ PRD éœ€æ±‚å…¨éƒ¨å®ç°
- âœ… ç”¨æˆ·ä½“éªŒå¤§å¹…æå‡
- âœ… åŠŸèƒ½å®Œæ•´çš„äº§å“

---

## ğŸ“Š å·¥ä½œé‡ä¼°ç®—

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | ä¾èµ– |
|------|--------|--------|------|
| å†å²è®°å½•é¡µé¢ | ğŸŸ¡ ä¸­ | 3-4h | æ—  |
| è‚¡ç¥¨è¯¦æƒ…é¡µ | ğŸŸ¡ ä¸­ | 3-4h | æ—  |
| å¡ç‰‡å¼å¸ƒå±€ | ğŸŸ¡ ä¸­ | 2-3h | æ—  |
| HTML å¯¼å‡º | ğŸŸ¢ ä½ | 3-4h | æ—  |
| CLI å·¥å…· | ğŸŸ¢ ä½ | 2-3h | æ—  |
| æŠ€æœ¯æŒ‡æ ‡ | ğŸŸ¢ ä½ | 4-6h | æ—  |
| **æ€»è®¡** | - | **17-24h** | - |

---

**å»ºè®®**: ä¼˜å…ˆå®Œæˆä¸­ä¼˜å…ˆçº§ä»»åŠ¡ (8-11 å°æ—¶)ï¼Œå³å¯è¾¾åˆ° 95% å®Œæˆåº¦

---

*æœ€åæ›´æ–°: 2025-10-15 01:59*
