# 🚀 StockGuru 部署指南 - 快速开始

**更新时间**: 2025-10-15 04:42

---

## 📋 快速部署（3步完成）

### 步骤1: 提交到 GitHub

**方法1: 使用自动脚本（推荐）**

```bash
# 运行部署脚本（替换 YOUR_USERNAME 为你的GitHub用户名）
./deploy-to-github.sh YOUR_USERNAME
```

**方法2: 手动操作**

```bash
# 1. 在 GitHub 创建仓库
# 访问 https://github.com/new
# 仓库名: StockGuru

# 2. 添加远程仓库
git remote add origin https://github.com/YOUR_USERNAME/StockGuru.git

# 3. 推送代码
git push -u origin main
```

### 步骤2: 部署后端（选择一种方式）

**方案A: Railway（推荐，免费）**

1. 访问 https://railway.app
2. 点击 "New Project" → "Deploy from GitHub repo"
3. 选择 StockGuru 仓库
4. 配置：
   - Root Directory: `stockguru-web/backend`
   - Start Command: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
5. 添加环境变量：
   ```
   SUPABASE_URL=your_url
   SUPABASE_KEY=your_key
   ```
6. 点击 Deploy
7. 复制生成的URL（如: https://stockguru-backend.railway.app）

**方案B: Render（免费）**

1. 访问 https://render.com
2. 新建 Web Service
3. 连接 GitHub 仓库
4. 配置：
   - Root Directory: `stockguru-web/backend`
   - Build Command: `pip install -r requirements.txt`
   - Start Command: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
5. 添加环境变量
6. 部署

### 步骤3: 部署前端

**方案A: Vercel（推荐，免费）**

1. 访问 https://vercel.com
2. 点击 "Import Project"
3. 选择 StockGuru 仓库
4. 配置：
   - Framework: Next.js
   - Root Directory: `frontend`
   - Build Command: `npm run build`
5. 添加环境变量：
   ```
   NEXT_PUBLIC_API_URL=https://your-backend.railway.app
   ```
6. 点击 Deploy
7. 等待部署完成，获取URL

**方案B: Netlify（免费）**

1. 访问 https://netlify.com
2. 导入 GitHub 仓库
3. 配置构建设置
4. 添加环境变量
5. 部署

---

## ✅ 部署完成检查

### 1. 检查后端

访问后端API文档：
```
https://your-backend.railway.app/docs
```

应该看到 FastAPI 的交互式文档。

### 2. 检查前端

访问前端地址：
```
https://your-app.vercel.app
```

应该看到 StockGuru 首页。

### 3. 测试功能

1. 选择日期
2. 点击"🚀 一键筛选"
3. 等待结果
4. 查看筛选结果
5. 导出Excel报告

---

## 🔧 环境变量配置

### 后端环境变量（必需）

```env
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-anon-key
PORT=8000
```

### 前端环境变量（必需）

```env
NEXT_PUBLIC_API_URL=https://your-backend.railway.app
```

---

## 📊 推荐部署方案

### 方案1: Vercel + Railway（最简单）

**优点**:
- ✅ 完全免费
- ✅ 自动部署
- ✅ HTTPS 自动配置
- ✅ CDN 加速

**适合**: 个人项目、演示项目

**成本**: 免费

### 方案2: 自己的服务器（最灵活）

**优点**:
- ✅ 完全控制
- ✅ 自定义域名
- ✅ 更多资源

**适合**: 生产环境

**成本**: 服务器费用（约￥50-200/月）

### 方案3: Docker（最标准）

**优点**:
- ✅ 环境一致
- ✅ 易于迁移
- ✅ 易于扩展

**适合**: 团队项目、生产环境

**成本**: 取决于部署平台

---

## 🎯 部署后优化

### 1. 配置自定义域名

**Vercel**:
1. 进入项目设置
2. 点击 "Domains"
3. 添加自定义域名
4. 配置DNS记录

**Railway**:
1. 进入项目设置
2. 点击 "Settings" → "Domains"
3. 添加自定义域名

### 2. 配置HTTPS

大多数平台自动配置HTTPS，无需手动操作。

### 3. 性能监控

**Vercel Analytics**:
- 自动启用
- 查看访问统计

**Railway Metrics**:
- 查看CPU、内存使用
- 监控请求量

### 4. 日志查看

**Railway**:
```
项目 → Deployments → View Logs
```

**Vercel**:
```
项目 → Deployments → Function Logs
```

---

## ⚠️ 常见问题

### 1. 推送失败

**错误**: `Permission denied`

**解决**:
```bash
# 使用 GitHub CLI 登录
gh auth login

# 或配置 SSH 密钥
ssh-keygen -t ed25519 -C "your_email@example.com"
# 添加到 GitHub: Settings → SSH Keys
```

### 2. 部署失败

**错误**: `Build failed`

**解决**:
- 检查环境变量是否正确
- 查看构建日志
- 确认依赖安装成功

### 3. API 连接失败

**错误**: `Failed to fetch`

**解决**:
- 检查 `NEXT_PUBLIC_API_URL` 是否正确
- 确认后端已成功部署
- 检查 CORS 配置

### 4. 数据库连接失败

**错误**: `Database connection failed`

**解决**:
- 检查 Supabase 环境变量
- 确认 Supabase 项目状态
- 测试数据库连接

---

## 📚 详细文档

- [DEPLOYMENT.md](DEPLOYMENT.md) - 完整部署指南
- [README.md](README.md) - 项目介绍
- [docs/FAQ.md](docs/FAQ.md) - 常见问题

---

## 🆘 获取帮助

如果遇到问题：

1. 查看 [FAQ文档](docs/FAQ.md)
2. 查看 [部署指南](DEPLOYMENT.md)
3. 检查平台文档：
   - [Vercel文档](https://vercel.com/docs)
   - [Railway文档](https://docs.railway.app)
   - [Render文档](https://render.com/docs)

---

## ✅ 部署检查清单

- [ ] 代码已推送到 GitHub
- [ ] 后端已部署并可访问
- [ ] 前端已部署并可访问
- [ ] 环境变量已正确配置
- [ ] API 连接正常
- [ ] 筛选功能正常
- [ ] 导出功能正常
- [ ] 自定义域名已配置（可选）
- [ ] HTTPS 已启用
- [ ] 监控已配置（可选）

---

*最后更新: 2025-10-15 04:42*
